(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7333:(e,t,s)=>{Promise.resolve().then(s.bind(s,9690))},9690:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var r=s(5155),i=s(2115);class n{draw(e){e.fillStyle=this.isWalkable?"#FDFEFE":"#CDCFCF",e.fillRect(this.x,this.y,20,20),e.strokeStyle="#FBEAEA",e.strokeRect(this.x,this.y,20,20)}constructor(e,t,s){this.x=e,this.y=t,this.isWalkable=s}}class o{initializeField(){for(let e=0;e<20;e++){let t=[];for(let s=0;s<this.cols;s++){let r=0===s||0===e||s===this.cols-1||e===this.rows-1,i=new n(s*this.cellSize,e*this.cellSize,!r);t.push(i)}this.cells.push(t)}}draw(e){for(let t of this.cells)for(let s of t)s.draw(e)}getCell(e,t){if(this.cells[t]&&this.cells[t][e])return this.cells[t][e]}constructor(){this.cells=[],this.cols=40,this.rows=20,this.cellSize=20,this.initializeField()}}let a={},l={};function c(e){if(a[e])return Promise.resolve(a[e]);if(l[e])return l[e];let t=new Image,s=new Promise((s,r)=>{t.onload=()=>{a[e]=t,s(t)},t.onerror=r});return t.src=e,l[e]=s,s}let h="/Snake-Game";class u{getImageSrc(){return"body"===this.type?"".concat(h,"/assets/snake/body.png"):"".concat(h,"/assets/snake/").concat(this.type,"-").concat(this.direction,".png")}async loadImage(){this.image=await c(this.getImageSrc())}draw(e,t){this.image&&e.drawImage(this.image,this.x*t,this.y*t,t,t)}async updateDirection(e){this.direction=e,("head"===this.type||"tail"===this.type)&&(this.image=await c(this.getImageSrc()))}constructor(e,t,s,r){this.x=e,this.y=t,this.type=s,this.direction=r,this.lastTailPosition={x:e,y:t}}}class d{async preloadImages(){for(let e of this.segments)await e.loadImage()}move(e){let t=this.segments[0],s=new u(t.x,t.y,"head",this.direction);switch(this.direction){case"left":s.x-=1;break;case"right":s.x+=1;break;case"up":s.y-=1;break;case"down":s.y+=1}let r=e.getCell(s.x,s.y);if(!r||!r.isWalkable)return!1;this.movementHistory.unshift({...s}),this.segments.forEach((e,t)=>{this.movementHistory[t]&&("tail"===e.type&&(e.lastTailPosition={x:e.x,y:e.y}),e.x=this.movementHistory[t].x,e.y=this.movementHistory[t].y)}),t.x=s.x,t.y=s.y,this.movementHistory.pop();let i=this.segments[this.segments.length-1],n=this.segments[this.segments.length-2];return i.updateDirection(this.getDirectionBetween(n,i)),!0}draw(e){for(let t of this.segments)t.draw(e,this.cellSize)}setDirection(e){("left"!==this.direction||"right"!==e)&&("right"!==this.direction||"left"!==e)&&("up"!==this.direction||"down"!==e)&&("down"!==this.direction||"up"!==e)&&(this.direction=e,this.segments[0].updateDirection(e))}grow(){let e=this.movementHistory[this.movementHistory.length-1],t=new u(e.x,e.y,"body",this.direction);t.loadImage(),this.segments.splice(this.segments.length-1,0,t),this.movementHistory.push({x:e.x,y:e.y})}getDirectionBetween(e,t){return e.x===t.x?e.y<t.y?"up":"down":e.x<t.x?"left":"right"}getCoordinates(){return this.segments.map(e=>({x:e.x,y:e.y}))}constructor(e,t,s){this.segments=[],this.movementHistory=[],this.direction="left",this.cellSize=s;for(let s=0;s<5;s++){let r=0===s?"head":4===s?"tail":"body",i=new u(e+s,t,r,this.direction);this.segments.push(i),this.movementHistory.push({x:e+s,y:t})}this.preloadImages()}}let m="/Snake-Game";class g{static createRandom(e,t){let s=0,r=0;for(let i=0;i<1e3;i++){s=Math.floor(40*Math.random()),r=Math.floor(20*Math.random());let i=t.getCell(s,r),n=e.some(e=>e.x===s&&e.y===r);if((null==i?void 0:i.isWalkable)&&!n)break}let i=g.bonusImages[Math.floor(Math.random()*g.bonusImages.length)],n=g.bonusValues[Math.floor(Math.random()*g.bonusValues.length)];return new g(s,r,i,n)}async draw(e,t){let s=new Image;s.src=this.imageSrc,await new Promise(e=>{s.onload=e}),e.drawImage(s,this.x*t,this.y*t,t,t)}constructor(e,t,s,r){this.x=e,this.y=t,this.imageSrc=s,this.value=r}}g.bonusImages=["".concat(m,"/assets/bonuses/banana.png"),"".concat(m,"/assets/bonuses/cherry.png"),"".concat(m,"/assets/bonuses/lemon.png")],g.bonusValues=[10,15,20];let y=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(),s=(0,i.useRef)(),n=(0,i.useRef)("start"),a=(0,i.useRef)(0);return(0,i.useEffect)(()=>{let r=e.current,i=null==r?void 0:r.getContext("2d");if(!r||!i)return;let l=null,c=null;t.current=new o;let h=Math.floor(20),u=Math.floor(10);s.current=new d(h,u,20);let m=()=>{var e,o;switch(i.clearRect(0,0,r.width,r.height),n.current){case"start":y("Start of the game - Press Any Key");return;case"paused":y("Game paused, ".concat(a.current," points - Press Any Key"));return;case"ended":y("Game completed, ".concat(a.current," points"));return;case"stopped":y("Game stopped, ".concat(a.current," points"));return}null===(e=t.current)||void 0===e||e.draw(i),null==l||l.draw(i,20),null===(o=s.current)||void 0===o||o.draw(i),i.fillStyle="#000",i.font="16px Arial",i.fillText("Score: ".concat(a.current),50,20)},y=e=>{i&&(i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(0,0,r.width,r.height),i.fillStyle="#fff",i.font="30px Arial",i.textAlign="center",i.fillText(e,r.width/2,r.height/2))},f=setInterval(()=>{if("running"!==n.current)return;let e=s.current,r=t.current;if(!e||!r)return;if(!e.move(r)){clearInterval(f),alert("Game Over!");return}let i=e.segments[0];l&&i.x===l.x&&i.y===l.y&&(e.grow(),a.current+=l.value,l=null,c&&clearTimeout(c),c=setTimeout(()=>{l=g.createRandom(e.getCoordinates(),r)},500)),m()},500),w=e=>{if("start"===n.current){n.current="running",a.current=0,m();return}if("paused"===n.current){n.current="running",m();return}if("stopped"===n.current){n.current="start",a.current=0,m();return}if("ended"===n.current)return;if(" "===e.key){n.current="paused",m();return}if("Escape"===e.key){n.current="ended",m();return}let t=s.current;if(!t)return;let r=t.direction;("ArrowUp"===e.key||"w"===e.key)&&("left"===r||"right"===r)?t.setDirection("up"):("ArrowDown"===e.key||"s"===e.key)&&("left"===r||"right"===r)?t.setDirection("down"):("ArrowLeft"===e.key||"a"===e.key)&&("up"===r||"down"===r)?t.setDirection("left"):("ArrowRight"===e.key||"d"===e.key)&&("up"===r||"down"===r)&&t.setDirection("right")};return l=g.createRandom(s.current.getCoordinates(),t.current),window.addEventListener("keydown",w),m(),()=>{clearInterval(f),window.removeEventListener("keydown",w)}},[]),(0,r.jsx)("div",{className:"flex justify-center mt-10",children:(0,r.jsx)("canvas",{ref:e,width:800,height:400,style:{border:"1px solid #333"}})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(7333)),_N_E=e.O()}]);